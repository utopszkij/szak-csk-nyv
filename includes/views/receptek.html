        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

        <div id="receptList">
			<div class="row">
				<h1 class="ribbon-banner"><span>{{ lng('RECEPTS') }}</span></h1>
			</div>	
			<div class="row">&nbsp;</div>

			<div class="filterForm">
				<form method="get" action="index.php" id="filterForm" class="form">
					<input type="hidden" name="task" value="receptek" />
					<input type="hidden" name="page" value="1" />
					<div>
						<label>{{ lng('NAME_SUBSTR') }}:</label>
						<input type="text" name="filterstr" id="filterstr" 
							   v-model="filterStr" class="form-control"/>
					</div>
					<div>
						<label>{{ lng('LABEL') }}:</label>
						<select name="filtercimke" id="filtercimke" 
							   v-model="filterCimke" class="form-control">
							<option value=""></option>	   
							<option v-for="cimke in cimkek" v-bind:value="cimke">{{ cimke }}</option>
						</select>	   
					</div>
					
					<div>
						<label></label>
						<input type="text" name="filtercreator" id="filtercreator"
							v-model="filterCreator" class="form-control" /> {{ lng('UPLOADER') }}
					</div>		
					<div>
						<label></label>
						<input type="date" name="filtercreated" id="filtercreated"
							v-model="filterCreated" class="form-control" /> {{ lng('AFTER_UPLOAD') }}
						<button type="submit" class="btn btn-primary searchBtn">
								<em class="fa fa-search"></em>&nbsp;<span>{{ lng('SEARCH') }}</span></button>
						<button type="button" v-on:click="delFilter()" 
								v-bind:title="lng('CLEARFILTER')" class="btn btn-secondary">X</button>&nbsp;
						<a v-if="loged > 0" v-bind:href="HREF('favorites',{'page':1})" 
							class="btn btn-success">
							<em class="fa fa-heart"></em>&nbsp;Kedvencek</a>		
						<button v-if="loged <= 0" type="button" class="btn btn-secondary" disabled="disabled">
									<em class="fa fa-heart"></em>&nbsp;Kedvencek</button>		
					</div>	
				</form>
			</div>
			<div class="row" v-if="page == 1">	
				<h5 class="fancy"><em class="fas fa-clock"></em>&nbsp;Új receptek</h5>
				<div id="receptListTable" class="col-md-8">
					<table style="width:100%">
						<thead>
							<tr><td>ID</td><td>{{ lng('NAME') }}</td></tr>		
						</thead>
						<tbody>
							<tr v-for="item in news" class="makeTrClass(item)">
								<td>
									<a v-bind:href="HREF('recept',{id:item.id,title:item.nev})">
										<img v-bind:_src="loadImg(item.id)" v-bind:id="'img_'+item.id" />
                                        <span class="id">{{ item.id }}</span>
                                        <div class="name">{{ item.nev }}</div>
									</a>
								</td>
                            </tr>
						</tbody>
					</table>
			   </div>		
			</div>
			<div class="row" v-if="page > 1">	
				<a type="button" class="btn btn-secondary" 
					v-bind:href="HREF('receptek',{page:1})"
					style="width:auto">
					<em class="fas fa-clock"></em>Új receptek
				</a>
			</div>	
			<div class="row">
				<h5 class="fancy">Receptek ABC sorrendben</h5>	
				<div id="receptListTable" class="col-md-8">
					<table style="width:100%">
						<thead>
							<tr><td>ID</td><td>{{ lng('NAME') }}</td></tr>		
						</thead>
						<tbody>
							<tr v-for="item in list" class="makeTrClass(item)">
								<td>
									<a v-bind:href="HREF('recept',{id:item.id,title:item.nev})">
										<img v-bind:_src="loadImg(item.id)" v-bind:id="'img'+item.id" />
										<em v-if="item.favorit" 
											style="margin-top:-20px; padding:2px; color:green; background-color:white; z-index:10"
											class="fas fa-heart"></em>
                                        <span class="id">{{ item.id }}</span>
                                        <div class="name">
											{{ item.nev }}
										</div>	
									</a>
								</td>
                            </tr>
						</tbody>
					</table>
					<div class="d-none d-md-inline col-md-4">
						<img class="dekor" src="images/dekor1.jpg" class="dekorImg" />
					</div>	
				</div>
				include paginator
			</div>
			<p>{{ lng('RECEPTSHELP') }}</p>
			<div style="text-align:center" v-if="loged > 0">
				<a v-bind:href="HREF('recept',{id:0})" class="btn btn-primary">
					<em class="fas fa-plus-circle"></em>&nbsp;{{ lng('ADD') }}</a>
			</div>
			<div v-if="loged <= 0">{{ lng('ADD_MUST_LOGIN') }}</div>

		</div>	

<script>
    var methods = {
        makeTrClass(item) {
            trClass = '';
			if (item.created_by == this.loged) {
				trClass = 'sajat';
			} else {
				trClass = 'idegen';
			}
            return trClass;    
        },
        makePaginatorClass(p,page) {
            var result = '';
            if (p == page) {
                result="actPaginatorItem";
            } else {
                result="paginatorItem"
            }
            return result;
        },
		delFilter() {
					document.getElementById('filterstr').value = '';
					document.getElementById('filtercreator').value = '';
					document.getElementById('filtercreated').value = '';
					document.getElementById('filtercimke').value = '';
					document.getElementById('filterForm').submit();
		},
        loadImg(id) {
                axios.get('index.php?task=getImage&id='+id)
                .then(function(response) {
                    var w = document.getElementById('img'+id)
					if (w) {
						w.src = response.data.replace('\n','');
					}	
					w = document.getElementById('img_'+id)
					if (w) {
						w.src = response.data.replace('\n','');
					}	
                })
        }
    }

 </script>       
